---
title: Collector Daemon
description: Building and configurating xbatd
---

::Headline

## Daemon (xbatd)

::

xbatd is a service that collects performance metrics during job runtime and writes them to the time-series database. The service is only running for the duration of the job and is started and stopped automatically.

::Headline

### Configuration for xbatd

::

The daemon expects a configuration file at `/etc/xbatd/xbatd.conf` which contains credentials and settings. This file must be present on all nodes and be secured against access from regular users. Starting from v2.0.0, the configuration can be automatically generated using the `setup.sh` script.

::codeblock

```bash
# Generate xbatd.conf file in the current directory
./setup.sh generate-xbatd-conf
# Generate xbatd.conf file and print to console
./setup.sh generate-xbatd-conf --stdout
```

::

::Headline

### Building the xbatd RPM

::

Use the provided script to build the daemon in a docker container without worrying about any dependencies. Version number and distro are required parameters, only RHEL8 and RHEL9 are currently supported. The RPM will be copied to current directory and must be installed on all compute nodes.

::codeblock

```bash
cd src/xbatd
./build.sh <version> [--distro (el8|el9)] [--release <release>] [--executor (docker|podman)] [--help]
```

::
