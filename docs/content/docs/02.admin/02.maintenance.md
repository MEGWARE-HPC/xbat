---
title: Maintenance
description: Database backup and maintenance
---

::Headline

## MongoDB

::

MongoDB provides multiple ways to perform backups and restores.

::Headline

### Backup and Restore via CLI Tools

::

MongoDB provides command-line tools `mongodump` and `mongorestore` for logical database backups and restores.
It is recommended to perform backups during periods of low activity to avoid inconsistencies.

To create a logical backup of the MongoDB database, the following command can be used:

::codeblock

```bash
mongodump \
  --host <host> \
  --port <port> \
  --username <user> \
  --password <password> \
  --authenticationDatabase admin \
  --db <database> \
  --out /path/for/backup/mongodb_backup
```

::

To restore the backup, the following command can be used:

::codeblock

```bash
mongorestore \
  --host <host> \
  --port <port> \
  --username <user> \
  --password <password> \
  --authenticationDatabase admin \
  --db <database> \
  --drop \
  /path/for/backup/mongodb_backup/<database>
```

::

::banner{type=warning}
WARNING - Using the `--drop` option will delete any existing data in the database before restoring.
This may lead to permanent data loss! Always ensure you have a valid backup before restoring.
::

::Headline

### Filesystem-level Backup

::

Alternatively, a filesystem-level backup of MongoDB data can be performed by archiving the data directory.
This approach requires that MongoDB is stopped before copying files to ensure data consistency.
If running a replica set, backups can be performed from a secondary node without stopping the primary.

::codeblock

```bash
systemctl stop mongod
cd /var/lib/xbat/mongodb
tar -czvf /path/for/backup/mongodb_backup.tar.gz *
systemctl start mongod
```

::

To restore from a filesystem backup:

::codeblock

```bash
systemctl stop mongod
tar -xzvf mongodb_backup.tar.gz -C /var/lib/xbat/mongodb
chown -R mongodb:mongodb /var/lib/xbat/mongodb
systemctl start mongod
```

::

::Headline

### Backup via UI or REST API

::

In addition to using CLI tools or filesystem-level backups, MongoDB backups and restores can also be performed via the xbat user interface or the REST API.

Administrators can trigger a full MongoDB backup directly from the UI menu, or by using the following REST API endpoint:

::codeblock

```bash
POST /api/v1/benchmarks/backup
```

::

The response will return a `.tgz` file containing the backup. Example response header:

::codeblock

```http
Content-Disposition: attachment; filename="MongoDB_backup_<timestamp>.tgz"
```

::

Check the [MongoDB documentation](https://www.mongodb.com/docs/manual/core/backups/){:target="_blank"} and the [xbat REST API documentation](https://localhost:7000/api/v1){:target="_blank"} for further details.

::Headline

## ClickHouse

::

TODO
